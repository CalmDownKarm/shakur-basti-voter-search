# Generated by gramex init 1.57.0 (don't delete this line)
# on 2019-10-02 by calmdownkarm <karmanyaaggarwal@gmail.com>

# Configurations for app: vsa
# ----------------------------------------------------------------------------

url:
  vsa-home:
    pattern: /$YAMLURL/
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/index.html
      # See https://learn.gramener.com/guide/auth/#authorization for auth rules
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: { expiry: { duration: 1 } }
  vsa-contact:
    pattern: /$YAMLURL/contact
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/contact.html
      template: true
      headers:
        Cache-Control: public, max-age=86400
  
  vsa-faq:
    pattern: /$YAMLURL/faq
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/faq.html
      template: true
      headers:
        Cache-Control: public, max-age=86400
  vsa-shakurbasti:
    pattern: /$YAMLURL/shakurbasti
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/shakurbasti.html
      # See https://learn.gramener.com/guide/auth/#authorization for auth rules
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: { expiry: { duration: 1 } }

  vsa-voter-data:
    pattern: /$YAMLURL/data
    handler: FormHandler
    kwargs:
      url: sqlite:///$YAMLPATH/assets/data/shakurbasti.db
      table: voters
      default:
        _c: ['Name', 'Relative', 'Relative Name', 'Age', 'Sex', 'Section']

  # vsa-login:
  #   # Default login_url is /login/. If you change this, change auth.login_url
  #   # https://learn.gramener.com/guide/auth/#login-urls
  #   pattern: /$YAMLURL/login/
  #   # You MUST change the auth before deploying. DBAuth is commonly used.
  #   # See https://learn.gramener.com/guide/auth/#database-auth
  #   handler: SimpleAuth
  #   kwargs:
  #     template: $YAMLPATH/login.html
  #     credentials:
  #       alpha: alpha
  #       beta: beta

  # vsa-logout:
  #   pattern: /$YAMLURL/logout/
  #   handler: LogoutHandler


# Gramex init configurations for app: vsa
# ----------------------------------------------------------------------------
import:
  # To secure application for production,
  # replace 'YOUR-PROD-SERVER-NAME' with your production server host name.
  deploy if socket.gethostname() in {'ip-172-31-5-139'}: $GRAMEXPATH/deploy.yaml
  # For alternate methods, see https://learn.gramener.com/guide/config/#conditions

  # /ui/ has Gramex UI components -- use this like the node_modules/ directory
  ui:
    path: $GRAMEXAPPS/ui/gramex.yaml
    YAMLURL: $YAMLURL/ui/

  configviewer:
    path: $GRAMEXAPPS/configeditor/gramex.yaml
    YAMLURL: /$YAMLURL/configview/

  shakurbasti:
    path: $YAMLPATH/shakurbasti/gramex.yaml
    YAMLURL: /sb/

handlers:
  BaseHandler:
    # Custom error pages for this application
    # auth:
    #   login_url: /$YAMLURL/login/
    error:
      400: { path: $YAMLPATH/error/400.html } # Bad request: e.g. URL argument missing
      401: { path: $YAMLPATH/error/401.html } # Unauthorized: User not logged in
      403: { path: $YAMLPATH/error/403.html } # Forbidden: user does not have access
      404: { path: $YAMLPATH/error/404.html } # File not found
      500: { path: $YAMLPATH/error/500.html } # Internal server error
